[166. Fraction to Recurring Decimal](https://leetcode.com/problems/fraction-to-recurring-decimal/)

# Intuition

* Division of two integers can yield:

  1. An integer (no remainder).
  2. A finite decimal (terminates).
  3. An infinite repeating decimal.

* To detect repeating parts, simulate long division:

  * Keep track of each **remainder** seen.
  * If a remainder repeats, the digits from its first occurrence to the current point form the repeating cycle.

---

# Approach

1. **Handle sign**:

   * Result is negative if numerator and denominator have opposite signs.
2. **Convert to absolute values** for easier calculation.
3. **Integer part**:

   * Compute `numerator / denominator`.
   * Append to result string.
4. **Fractional part**:

   * Use remainder `numerator % denominator`.
   * Multiply remainder by 10 and divide by denominator for each digit.
   * Track remainders in a map: remainder → index in result string.
   * If a remainder repeats, insert `(` at its first index and append `)` at the end.
5. Return the built string.

---

# Complexity

* **Time:** `O(k)` where `k` is the length of the non-repeating + repeating sequence. Since result length is bounded by `10^4`, this is safe.
* **Space:** `O(k)` for storing remainders.

---

# Code

```ts
function fractionToDecimal(numerator: number, denominator: number): string {
    if (numerator === 0) return "0";

    let result = "";

    // Step 1: Handle sign
    if ((numerator < 0) !== (denominator < 0)) {
        result += "-";
    }

    // Step 2: Convert to absolute
    let num = Math.abs(numerator);
    let den = Math.abs(denominator);

    // Step 3: Integer part
    result += Math.floor(num / den).toString();
    let remainder = num % den;
    if (remainder === 0) return result;

    result += ".";

    // Step 4: Fractional part with repeating detection
    const map = new Map<number, number>(); // remainder → index in result string
    while (remainder !== 0) {
        if (map.has(remainder)) {
            // repeating cycle found
            const idx = map.get(remainder)!;
            return result.slice(0, idx) + "(" + result.slice(idx) + ")";
        }

        map.set(remainder, result.length);

        remainder *= 10;
        const digit = Math.floor(remainder / den);
        result += digit.toString();
        remainder %= den;
    }

    return result;
};

```

---

## Example Walkthroughs

**Example 1**

Input: `numerator = 1, denominator = 2`

* Integer part: `0`
* Fraction part: `1 / 2 = 0.5`
  Output: `"0.5"`

**Example 2**

Input: `numerator = 2, denominator = 1`

* Integer part: `2`
* Remainder = `0` → stop
  Output: `"2"`

**Example 3**

Input: `numerator = 4, denominator = 333`

* Integer part: `0`
* Fraction part: simulate division → `0.(012)`
  Output: `"0.(012)"`

---

