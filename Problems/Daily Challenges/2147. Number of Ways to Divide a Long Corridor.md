[2147. Number of Ways to Divide a Long Corridor](https://leetcode.com/problems/number-of-ways-to-divide-a-long-corridor/)

# Intuition

Each valid section must contain **exactly two seats**.
Plants are irrelevant except that they create multiple divider-placement choices **between seat pairs**.

The corridor is already bounded on both ends. The task reduces to:

* Group seats in pairs, left to right.
* Between consecutive seat-pairs, count how many positions allow a divider.
* Multiply those choices.

If total seats are odd or zero, division is impossible.

## Key Insight

Let seats appear at indices:

```
s0, s1, s2, s3, s4, s5, ...
```

Valid sections are:

```
(s0, s1), (s2, s3), (s4, s5), ...
```

Between `(s1, s2)` lies a gap.
If there are `k` plants between them, there are `k + 1` valid divider positions.

Total ways = product of `(plants_between_pairs + 1)` for all adjacent seat-pairs.

---

# Approach

1. Traverse corridor.
2. Count total seats.

   * If seats % 2 ≠ 0 → return 0.
3. While traversing:

   * Track seats encountered.
   * When finishing a pair (2 seats), start counting plants.
   * When the next seat appears (starting next pair), multiply answer by `(plantCount + 1)`.
4. Use modulo `1e9 + 7`.

Single pass. No DP. No extra memory.

---
# Complexity

- **Time Complexity**
	* **O(n)** - single scan

- **Space Complexity**
	* **O(1)** - constant space

---

# Code

```ts
function numberOfWays(corridor: string): number {
    const MOD = 1_000_000_007;
    let seats = 0;
    let plantsBetween = 0;
    let ways = 1;
    let inGap = false;

    for (const ch of corridor) {
        if (ch === 'S') {
            seats++;

            if (seats % 2 === 0) {
                // completed a pair
                inGap = true;
            } else if (seats > 1) {
                // starting a new pair, close previous gap
                ways = (ways * (plantsBetween + 1)) % MOD;
                plantsBetween = 0;
                inGap = false;
            }
        } else if (inGap) {
            plantsBetween++;
        }
    }

    return seats % 2 === 0 && seats > 0 ? ways : 0;
};

```

---

# Example Walkthrough

### Example 1

`corridor = "SSPPSPS"`

Seat indices: `0,1,4,6`

Pairs:

* (0,1)
* (4,6)

Between seat 1 and 4 → `"PP"` → 2 plants
Divider choices = `2 + 1 = 3`

Final answer:

```
3
```



### Example 2

`corridor = "PPSPSP"`

Seats at `2,4` → one pair
No gaps → only 1 way

```
1
```



### Example 3

`corridor = "S"`

Seats = 1 (odd)
Impossible

```
0
```

---

