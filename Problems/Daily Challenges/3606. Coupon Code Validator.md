[3606. Coupon Code Validator](https://leetcode.com/problems/coupon-code-validator/)

# Intuition

Filter first. Ordering comes later.
A coupon is either valid or irrelevant. Validity is independent per index and determined by three strict predicates: active flag, code format, business line membership. Once filtered, ordering is deterministic: fixed business line priority, then lexicographical code order inside each group.

---

# Approach

1. Predefine business line priority:

   ```
   electronics → 0
   grocery     → 1
   pharmacy    → 2
   restaurant  → 3
   ```

2. Create four buckets (arrays), one per business line in priority order.

3. Iterate once over the input:

   * Skip if `isActive[i]` is false.
   * Skip if `code[i]` is empty or violates the regex `^[a-zA-Z0-9_]+$`.
   * Skip if `businessLine[i]` is not one of the four valid categories.
   * Otherwise, push `code[i]` into the corresponding bucket.

4. Sort each bucket lexicographically.

5. Concatenate buckets in priority order and return.

---
# Complexity

- **Time Complexity**
	* Filtering: `O(n)`
	* Sorting: worst case `O(n log n)` (all coupons in one bucket)
	* Total: `O(n log n)`

- **Space Complexity**
	* Buckets + output: `O(n)`

---

# Code

```ts
function validateCoupons(
    code: string[],
    businessLine: string[],
    isActive: boolean[]
): string[] {
    const buckets: string[][] = Array.from({ length: 4 }, () => []);

    for (let i = 0; i < code.length; i++) {
        if (!isActive[i]) continue;
        if (!isValid(code[i])) continue;

        if (businessLine[i] === "electronics") {
            buckets[0].push(code[i]);
        } else if (businessLine[i] === "grocery") {
            buckets[1].push(code[i]);
        } else if (businessLine[i] === "pharmacy") {
            buckets[2].push(code[i]);
        } else if (businessLine[i] === "restaurant") {
            buckets[3].push(code[i]);
        }
    }

    const result: string[] = [];
    for (const bucket of buckets) {
        bucket.sort();
        result.push(...bucket);
    }

    return result;
}

function isValid(code: string): boolean {
    return /^[a-zA-Z0-9_]+$/.test(code);
};

```

---

# Example Walkthrough

**Input**

```
code         = ["SAVE20","","PHARMA5","SAVE@20"]
businessLine = ["restaurant","grocery","pharmacy","restaurant"]
isActive     = [true,true,true,true]
```

**Step-by-step**

* Index 0
  Active, code valid, businessLine = restaurant → bucket[3] = ["SAVE20"]

* Index 1
  Code empty → invalid → ignored

* Index 2
  Active, code valid, businessLine = pharmacy → bucket[2] = ["PHARMA5"]

* Index 3
  Code contains '@' → invalid → ignored

**Buckets before sort**

```
electronics: []
grocery:     []
pharmacy:    ["PHARMA5"]
restaurant:  ["SAVE20"]
```

**After sorting and concatenation**

```
["PHARMA5", "SAVE20"]
```

