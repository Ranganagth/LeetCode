[2043. Simple Bank System](https://leetcode.com/problems/simple-bank-system/)

# Intuition

We are simulating a **banking system** that manages deposits, withdrawals, and transfers between accounts.

Each account:

* Has a **balance**.
* Can only perform valid transactions:

  * The account number must exist.
  * It cannot withdraw or transfer more than its current balance.

We just need to ensure correctness and efficiency for up to **10⁴ operations**, which is easily manageable with O(1) time per operation.

---

# Approach

We’ll create a `Bank` class with:

### 1. Constructor

```ts
constructor(balance: number[])
```

* Initializes an internal array `this.balance` where:

  * Index `i` corresponds to **account i+1**.
* Example: balance[0] → account 1, balance[1] → account 2, etc.

### 2. Helper Function

```ts
private isValidAccount(account: number): boolean
```

* Returns `true` if `account` is between `1` and `n`.
* Helps avoid repeating validation code.

### 3. withdraw(account, money)

* Check if account is valid and has enough balance.
* If yes, deduct and return `true`.
* Else, return `false`.

### 4. deposit(account, money)

* Check if account is valid.
* If yes, add money and return `true`.
* Else, return `false`.

### 5. transfer(account1, account2, money)

* Validate both accounts.
* Check if account1 has enough balance.
* If valid, deduct from `account1` and add to `account2`.
* Return `true` if successful, otherwise `false`.

---

# Complexity

* **Time:** O(1) per operation (constant-time array updates)
* **Space:** O(n) for storing balances

---

# Code

```typescript
class Bank {
  private balance: bigint[];

  constructor(balance: number[]) {
    // Convert all to BigInt for safe arithmetic (money can be up to 10^12)
    this.balance = balance.map(BigInt);
  }

  private isValidAccount(account: number): boolean {
    return account >= 1 && account <= this.balance.length;
  }

  withdraw(account: number, money: number): boolean {
    if (!this.isValidAccount(account)) return false;

    const idx = account - 1;
    const amt = BigInt(money);

    if (this.balance[idx] < amt) return false;

    this.balance[idx] -= amt;
    return true;
  }

  deposit(account: number, money: number): boolean {
    if (!this.isValidAccount(account)) return false;

    const idx = account - 1;
    this.balance[idx] += BigInt(money);
    return true;
  }

  transfer(account1: number, account2: number, money: number): boolean {
    if (!this.isValidAccount(account1) || !this.isValidAccount(account2)) return false;

    const idx1 = account1 - 1;
    const idx2 = account2 - 1;
    const amt = BigInt(money);

    if (this.balance[idx1] < amt) return false;

    this.balance[idx1] -= amt;
    this.balance[idx2] += amt;
    return true;
  }
};

```

---

## Example Walkthrough

### Input:

```text
["Bank", "withdraw", "transfer", "deposit", "transfer", "withdraw"]
[[[10, 100, 20, 50, 30]], [3, 10], [5, 1, 20], [5, 20], [3, 4, 15], [10, 50]]
```

### Step-by-step:

| Operation                 | Action                                 | Result |
| ------------------------- | -------------------------------------- | ------ |
| `Bank([10,100,20,50,30])` | Create bank with 5 accounts            | –      |
| `withdraw(3, 10)`         | Account 3 → 20 - 10 = 10               | true   |
| `transfer(5, 1, 20)`      | Account 5: 30 → 10; Account 1: 10 → 30 | true   |
| `deposit(5, 20)`          | Account 5: 10 + 20 = 30                | true   |
| `transfer(3, 4, 15)`      | Account 3 has 10 < 15                  | false  |
| `withdraw(10, 50)`        | Account 10 doesn’t exist               | false  |

**Output:**
`[null, true, true, true, false, false]`

---

## Summary

| Operation   | Time     | Description           |
| ----------- | -------- | --------------------- |
| `withdraw`  | O(1)     | Validates and deducts |
| `deposit`   | O(1)     | Validates and adds    |
| `transfer`  | O(1)     | Moves money if valid  |
| **Overall** | **O(1)** | Per transaction       |

---
