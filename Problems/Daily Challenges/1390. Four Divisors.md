[1390. Four Divisors](https://leetcode.com/problems/four-divisors/)

# Intuition

Focus only on numbers that can have exactly four divisors. A number has exactly four divisors **iff** it is:

1. the product of two distinct primes `p * q`, divisors → `1, p, q, p*q`
2. the cube of a prime `p^3`, divisors → `1, p, p^2, p^3`

Everything else has a different divisor count. Brute-forcing all divisors up to `n` is slow. Instead, detect only these two structures.

---

# Approach

**For each number:**
If smallest factor = `d`

- If `num == d³` and `d` is prime → valid
- Else if `d` and `num/d` are both prime and different → valid
- Otherwise → skip

When valid, sum the four divisors directly.


---

# Complexity

- **Time:** `O(n * sqrt(max(nums)))`
- **Space:** `O(1)`

---

# Code

```ts
function sumFourDivisors(nums: number[]): number {
    const isPrime = (x: number): boolean => {
        if (x < 2) return false;
        for (let i = 2; i * i <= x; i++) {
            if (x % i === 0) return false;
        }
        return true;
    };

    let result = 0;

    for (const num of nums) {
        let d = 0;

        // find the smallest factor > 1
        for (let i = 2; i * i <= num; i++) {
            if (num % i === 0) {
                d = i;
                break;
            }
        }

        if (d === 0) continue; // num is prime

        const q = num / d;

        // case 1: num = p^3
        if (isPrime(d) && d * d * d === num) {
            result += 1 + d + d * d + num;
            continue;
        }

        // case 2: num = p * q, p != q, both prime
        if (d !== q && isPrime(d) && isPrime(q)) {
            result += 1 + d + q + num;
        }
    }

    return result;
};

```

---

# Example walkthrough

**nums** = `[1,2,3,4,5,6,7,8,9,10]`

- 6 → `2 * 3` → sum = 12
- 8 → `2³` → sum = 15
- 10 → `2 * 5` → sum = 18

**Total** = `12 + 15 + 18 = 45`