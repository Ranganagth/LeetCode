[1411. Number of Ways to Paint N × 3 Grid](https://leetcode.com/problems/number-of-ways-to-paint-n-3-grid/)

**Core idea:** each row of 3 cells can only appear in one of two pattern types once adjacency rules are enforced. Track only those two counts across rows and update them with fixed transitions.

---

# Intuition
For any valid painted row of length 3:

* Type A (ABA): exactly 2 colors used, example RYG where ends share the same color structure type-wise → count = 6.
* Type B (ABC): all 3 colors distinct → count = 6.

For n = 1, total = 6 + 6 = 12.

When stacking rows, only certain transitions keep vertical adjacency valid. Pre-computed transitions:

* A → A: 3 ways
* A → B: 2 ways
* B → A: 2 ways
* B → B: 2 ways

**Let:**
same = number of type-A rows up to current row
diff = number of type-B rows up to current row

**Recurrence:**
newSame = (same * 3 + diff * 2) mod M
newDiff = (same * 2 + diff * 2) mod M

**Initialize:**
same = 6, diff = 6.
Iterate rows 2..n.

**Answer** = (same + diff) mod M, where M = 1_000_000_007.

---

# Complexity

- **Time:** O(n)
- **Space:** O(1)

---

# Code

```ts
function numOfWays(n: number): number {
    const MOD = 1_000_000_007;
    let same = 6; // ABA patterns
    let diff = 6; // ABC patterns

    for (let i = 2; i <= n; i++) {
        const newSame = (same * 3 + diff * 2) % MOD;
        const newDiff = (same * 2 + diff * 2) % MOD;
        same = newSame;
        diff = newDiff;
    }

    return (same + diff) % MOD;
};

```

---

# Example walkthrough

**n** = 2
Row1: same = 6, diff = 6
Row2:
**newSame** = 6*3 + 6*2 = 30
**newDiff** = 6*2 + 6*2 = 24
**Total** = 54

For **n** = 1, **total** = 12.

---
