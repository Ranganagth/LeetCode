[3577. Count the Number of Computer Unlocking Permutations](https://leetcode.com/problems/count-the-number-of-computer-unlocking-permutations/)


# Intuition

1. **Computer 0 must be first**
   Because it is the only initially unlocked machine.

2. **Every computer i > 0 must have at least one j < i with smaller complexity.**
   But since:

   * j < i
   * and complexity is arbitrary
     the only guaranteed candidate for all i is **computer 0**.

3. Therefore, a necessary condition is:

$$   \forall i>0: \text{complexity}[i] > \text{complexity}[0]$$

   If any complexity[i] ≤ complexity[0], the machine at index i can never be unlocked → answer = 0.

4. If all complexity[i] > complexity[0], then:

   * Every machine i > 0 can be unlocked directly with machine 0.
   * No further ordering constraints exist.

5. So, after placing **0 first**, the remaining (n – 1) computers can appear in **any order**.

   Number of permutations:

$$   (n - 1)!$$

   But computer 1 must not necessarily appear second; all remaining positions are free. Because your loop multiplies numbers from 2 to n - 1, this computes exactly:

$$   1 \cdot 2 \cdot 3 \cdots (n - 2) = (n - 2)!$$

   But note that:

   * You start ans = 1
   * Multiply by i from 2 to n − 1
     Result = (n − 2)! × (n − 1) = (n−1)!.

   So your computation is correct.

---

# Approach Summary

* Check if any complexity[i] ≤ complexity[0] for i > 0
  -> return 0.

* Otherwise, permutations = factorial(n − 1).

---

# Complexity

* **Time Complexity:** O(n)

---

# Code

```ts
function countPermutations(complexity: number[]): number {
    const n = complexity.length;
    const mod = 1000000007;

    // 0 must unlock all others
    for (let i = 1; i < n; i++) {
        if (complexity[i] <= complexity[0]) {
            return 0;
        }
    }

    // After placing 0 first, remaining (n-1)! permutations
    let ans = 1;
    for (let i = 2; i < n; i++) {
        ans = (ans * i) % mod;
    }
    return ans;
};

```

---

# Example

### Input

```
[1, 2, 3]
```

* All > complexity[0] = 1
* Answer = (3 − 1)! = 2

### Output

```
2
```

---
